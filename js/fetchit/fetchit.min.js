function fetchit(e,t,n){return new Promise(function(s,i){"use strict";n=n||{};var r=new XMLHttpRequest,a=!1,o=(n.method||"GET").toUpperCase();t instanceof FormData?o="POST":t&&(t="data="+encodeURIComponent(JSON.stringify(t)),"POST"==o?a=!0:"GET"==o&&(e+=(e.indexOf("?")<0?"?":"&")+t,t=null)),r.open(o,e,!0),r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=this.responseText;if(e.length>1&&("{"==e[0]||"["==e[0]))try{e=JSON.parse(e)}catch(e){return void i("bad response")}s(e)}else i("network error"+(this.status>0?": "+this.status:""))},r.timeout=1e3*(n.timeout||5),"include"===n.credentials?r.withCredentials=!0:"omit"===n.credentials&&(r.withCredentials=!1),n.header&&option.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),a&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t)})}